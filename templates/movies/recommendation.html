{% extends 'base.html' %}

{% block content %}
<div class="max-w-6xl mx-auto">
    <div class="text-center mb-12">
        <h1 class="text-3xl md:text-4xl font-bold mb-4">
            ‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå <span class="text-yellow-500">"{{ mood.name }}"</span>
        </h1>
        <p class="text-lg md:text-xl text-gray-400">‡∏Ñ‡∏±‡∏î‡∏°‡∏≤‡πÄ‡∏ô‡πâ‡∏ô‡πÜ ‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏ä‡∏°</p>
    </div>

    <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4 md:gap-6">
        {% for movie in movies %}
        <a href="{% url 'movie_detail' movie.tmdb_id %}" class="block bg-gray-800 rounded-lg overflow-hidden shadow-lg hover:shadow-2xl transition duration-300 transform hover:-translate-y-2 relative group h-full flex flex-col">
            
            <!-- Poster -->
            <div class="relative flex-shrink-0">
                {% if movie.poster_path %}
                <img src="https://image.tmdb.org/t/p/w500{{ movie.poster_path }}" alt="{{ movie.title }}" class="w-full h-64 md:h-72 object-cover">
                {% else %}
                <div class="w-full h-64 md:h-72 bg-gray-700 flex items-center justify-center text-gray-500">No Poster</div>
                {% endif %}

                <!-- Mood Score Overlay -->
                <div class="absolute top-2 right-2 bg-blue-600 text-white text-xs font-bold px-2 py-1 rounded-full shadow-md z-10 opacity-90">
                    Score: {{ movie.mood_score|floatformat:1 }}
                </div>
            </div>
            
            <div class="p-4 flex flex-col flex-grow justify-between">
                <div>
                    <h3 class="font-bold text-base md:text-lg truncate group-hover:text-yellow-500 transition" title="{{ movie.title }}">{{ movie.title }}</h3>
                </div>
                
                <!-- ‡∏õ‡∏£‡∏±‡∏ö‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á -->
                <div class="mt-3 pt-3 border-t border-gray-700 text-sm text-gray-400 flex flex-col gap-1">
                    <span class="flex items-center">
                        <span class="mr-2"></span> {{ movie.mood_count }} ‡∏Ñ‡∏ô‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ
                    </span>
                    <span class="flex items-center">
                        <span class="mr-2"></span> ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡πâ‡∏ô {{ movie.avg_intensity|floatformat:1 }}/5
                    </span>
                </div>
            </div>
        </a>
        {% empty %}
            <div class="col-span-full text-center py-16 bg-gray-800 rounded-xl border-2 border-dashed border-gray-700 mx-4">
                <p class="text-xl md:text-2xl text-gray-400 mb-4">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏´‡∏ô‡∏±‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÑ‡∏´‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏ô‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å "{{ mood.name }}" ‡πÄ‡∏•‡∏¢ üòÖ</p>
                <p class="text-gray-500">‡∏•‡∏≠‡∏á‡πÑ‡∏õ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ñ‡∏¢‡∏î‡∏π‡∏™‡∏¥ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡πÜ ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏°‡∏µ‡∏´‡∏ô‡∏±‡∏á‡∏î‡∏π!</p>
                <a href="{% url 'search_movies' %}" class="inline-block mt-6 bg-yellow-500 text-gray-900 px-6 py-3 rounded-lg font-bold hover:bg-yellow-400 transition">
                    ‡πÑ‡∏õ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏Å‡∏±‡∏ô‡πÄ‡∏ñ‡∏≠‡∏∞
                </a>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}