{% extends 'base.html' %}

{% block content %}
<div class="text-center mb-12">
    <h1 class="text-4xl md:text-6xl font-bold mb-4">‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÅ‡∏ö‡∏ö‡πÑ‡∏´‡∏ô?</h1>
    <p class="text-xl text-gray-300">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏´‡∏ô‡∏±‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πà‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏≠‡∏á</p>
</div>

<!-- Mood Selection Grid (‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏î‡∏¥‡∏°) -->
<div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 max-w-4xl mx-auto mb-16">
    {% for mood in moods %}
    <a href="{% url 'mood_recommendation' mood.id %}" class="mood-card transform hover:scale-105 transition duration-300 h-full">
        <div class="bg-gray-800 rounded-xl p-6 text-center border-2 border-transparent hover:border-yellow-500 cursor-pointer shadow-lg h-full flex flex-col justify-center items-center min-h-[180px]">
            <span class="text-5xl mb-4 filter drop-shadow-lg">
                {% if 'Happy' in mood.name %}üòä
                {% elif 'Sad' in mood.name %}üò≠
                {% elif 'Scary' in mood.name %}üò®
                {% elif 'Surprised' in mood.name %}üò≤
                {% elif 'Heartwarming' in mood.name %}ü•∞
                {% elif 'Tense' in mood.name %}üò¨
                {% elif 'Funny' in mood.name %}ü§£
                {% elif 'Relaxing' in mood.name %}üòå
                {% else %}üé¨{% endif %}
            </span>
            <h3 class="text-lg md:text-xl font-semibold break-words leading-tight px-2">
                {{ mood.name }}
            </h3>
        </div>
    </a>
    {% empty %}
        <p class="col-span-full text-center text-gray-500 py-12 text-xl bg-gray-800 rounded-xl border-2 border-dashed border-gray-700">
            ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö (‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô Admin)
        </p>
    {% endfor %}
</div>

<!-- Popular Movies Section (‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏°‡πà) -->
{% if popular_movies %}
<div class="max-w-6xl mx-auto mt-16 pt-16 border-t border-gray-800">
    <h2 class="text-3xl font-bold mb-8 flex items-center">
        <span class="mr-2">üî•</span> ‡∏´‡∏ô‡∏±‡∏á‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ
    </h2>
    
    <!-- ‡πÉ‡∏ä‡πâ Grid ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡∏±‡∏á‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏° -->
    <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏° overflow-x-auto ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô‡πÑ‡∏î‡πâ -->
    <div class="flex overflow-x-auto pb-4 space-x-6 lg:grid lg:grid-cols-5 lg:space-x-0 lg:gap-6 scrollbar-hide">
        {% for movie in popular_movies %}
        <a href="{% url 'movie_detail' movie.tmdb_id %}" class="flex-shrink-0 w-40 lg:w-auto block bg-gray-800 rounded-lg overflow-hidden shadow-lg hover:shadow-2xl transition duration-300 transform hover:-translate-y-2">
            <img src="{{ movie.poster_url }}" alt="{{ movie.title }}" class="w-full h-60 object-cover">
            <div class="p-3">
                <h3 class="font-bold text-sm truncate">{{ movie.title }}</h3>
                <div class="flex items-center justify-between mt-1">
                     <span class="text-xs text-gray-400">{{ movie.release_date|slice:":4" }}</span>
                     <span class="text-xs bg-yellow-500 text-gray-900 px-1.5 py-0.5 rounded font-bold">
                        ‚òÖ {{ movie.vote_average|floatformat:1 }}
                     </span>
                </div>
            </div>
        </a>
        {% endfor %}
    </div>
</div>
{% endif %}

{% endblock %}